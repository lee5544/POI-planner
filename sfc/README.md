
# sfc-planner
## sfc_env
SFC的工作空间由栅格地图和POIs地图叠加组成，占据和自由空间由栅格地图精确表示，未知空间由POIs地图估计。

SFC的栅格地图根据深度图和里程计更新，POIs地图根据搜索和优化过程实时更新。

POIs (Points of interest)表示规划过程中值得关注的障碍物。本程序通过std::set实现，确保POIs唯一性。将其组织成K-D tree的形式，方便距离查询。

SFC采用B样条曲线表达轨迹，利用了其局部性和凸性。

## 序列优化

## 障碍方法优化

加入环境复杂度，稀疏和稠密


# 一、仿真实验设计
四种场景：1、2D的人造建筑物；2、低中高复杂度的3D的森林场景
(40x40x5；0.1m；40-30，80-60，120-90，160-120)

## 2D场景的实验
功能展示

## 3D场景实验
### 实验1 相同搜索、优化目标下，不同地图方法的比较

目标：本文提供一种既能保证安全性也是低耗时的建图方法。安全性&耗时的联合比较。

高中低的环境复杂度，地图方法ours、esdf、points，搜索hybird A*，优化梯度，

自变量：安全性需求 $d_{opt}$，建图范围

因变量：建图时间、搜索和优化时间、轨迹和障碍物距离

### 实验2 地图精度，不同搜索方法下，精度可视化

精度：定性分析，给出3种场景的图

突出安全性-距离优势。绘制距离-长度曲线图。横轴是点的数量，纵轴是距离。

做法：在每个复杂度场景下，地图更新范围是 $d_{map}=2m$, 优化距离设置成多个$d_{opt}=2m$，比较距离。


### 实验3 序列优化的完备性（收敛性）

收敛性质：POI数量变化情况的曲线。横轴是迭代次数，纵轴是优化迭代次数数量/POI数量变化分布。

优化的时候，目标值的变化情况。

耗时情况：搜索、优化、POI地图更新的时间

精度情况：不同的场景复杂度下，不同搜索方法，真实和估计距离的差，考虑真实距离很大。比如差/真实值

安全情况

做法：
    在地图随机生成10m的两个点，搜索、优化
    
    搜索和优化的轨迹可视化

    记录轨迹的安全性、记录搜索和优化的时间
    
    记录POI数量的变化
    记录目标函数值的变化情况


### （总体对比）不同框架方法的对比


# 二、实际飞行的表现


